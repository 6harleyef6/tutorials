<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    <title>Applications - tutorials</title>

    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic,700&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/zf.css" rel="stylesheet">
    <link href="../../../css/prism-zf.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
              <a class="logo-link" href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Zend Framework"><img src="../../../img/zf-logo-mark.png" height="28" alt="Zend Framework" /></a>
              <a href="../../..">tutorials</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">MVC Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Getting Started with Zend Framework</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../getting-started/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../../getting-started/skeleton-application/">The Skeleton Application</a>
</li>

        
            
<li >
    <a href="../../../getting-started/modules/">Modules</a>
</li>

        
            
<li >
    <a href="../../../getting-started/routing-and-controllers/">Routing and Controllers</a>
</li>

        
            
<li >
    <a href="../../../getting-started/database-and-models/">Database and Models</a>
</li>

        
            
<li >
    <a href="../../../getting-started/forms-and-actions/">Forms and Actions</a>
</li>

        
            
<li >
    <a href="../../../getting-started/conclusion/">Conclusion</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../unit-testing/">Unit Testing A zend-mvc Application</a>
</li>

                        
                            
<li >
    <a href="../../../navigation/">Adding zend-navigation to the Album Module</a>
</li>

                        
                            
<li >
    <a href="../../../pagination/">Adding zend-paginator to the Album Module</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">In-Depth Tutorial</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../in-depth-guide/first-module/">Introducing the Blog Module</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/models-and-servicemanager/">Models and the ServiceManager</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/preparing-databases/">Preparing for Different Databases</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/zend-db-sql-zend-hydrator/">SQL Abstraction and Object Hydration</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/understanding-routing/">Understanding the Router</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/zend-form-zend-form-fieldset/">Making Use of Forms and Fieldsets</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/data-binding/">Editing and Deleting Data</a>
</li>

        
            
<li >
    <a href="../../../in-depth-guide/review/">Reviewing the Blog Module</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../advanced-config/">Advanced Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../i18n/">Internationalization</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Component Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../db-adapter/">Setting Up A Database Adapter</a>
</li>

                        
                            
<li >
    <a href="../../../event-manager/">Using the EventManager</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Migration <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">To Version 3</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../overview/">Overview</a>
</li>

        
            
<li >
    <a href="../components/">Components</a>
</li>

        
            
<li class="active">
    <a href="./">Applications</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/tutorials">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#upgrading-applications">Upgrading Applications</a></li>
        
            <li><a href="#upgrading-zend-framework">Upgrading Zend Framework</a></li>
        
            <li><a href="#integration-packages">Integration packages</a></li>
        
            <li><a href="#autoloading">Autoloading</a></li>
        
            <li><a href="#bootstrap">Bootstrap</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../components/"><i class="fa fa-arrow-left"></i> Previous</a>
      </li>
      <li class="next disabled ">
        <a rel="next" >Next <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="../../..">Docs</a> &raquo;</li>
  
    
      
        <li>Migration &raquo;</li>
      
    
      
        <li>To Version 3 &raquo;</li>
      
    
  
  <li class="active">Applications</li>
</ol>

<h1 id="upgrading-applications">Upgrading Applications</h1>
<p>If you have an existing Zend Framework v2 application, and want to update it to
the latest versions, you will have some special considerations.</p>
<h2 id="upgrading-zend-framework">Upgrading Zend Framework</h2>
<p>Since the 2.5 release, the zendframework package has been essentially a
"metapackage", defining no code, and only dependencies on the various component
packages. This means that when you install <code>zendframework/zendframework</code>, you
get the full set of components, at the latest 2.* versions.</p>
<p>With the release of version 3, we recommend:</p>
<ul>
<li>Removing the zendframework/zendframework package.</li>
<li>Installing the zendframework/zend-component-installer package.</li>
<li>Installing the zendframework/zend-mvc package.</li>
<li>Installing each ZF component package you actually use in your application.</li>
</ul>
<p>The process would look like this:</p>
<pre class="codehilite"><code class="language-bash">$ composer remove zendframework/zendframework
$ composer require zendframework/zend-component-installer
$ composer require zendframework/zend-mvc
# Repeat as necessary for components you use if not already installed</code></pre>


<p>When you install zend-mvc, it will prompt you to add configuration for
components; choose either <code>application.config.php</code> or <code>modules.config.php</code>, and
re-use your selection for all other packages. This step ensures that the various
components installed, and any news ones you add later, are configured in your
application correctly.</p>
<p>This approach will ensure you are only installing what you actually need. As an
example, if you are not using zend-barcode, or zend-permissions-acl, or
zend-mail, there's no reason to install them.</p>
<blockquote>
<h3 id="keeping-the-zendframework-package">Keeping the zendframework package</h3>
<p>If you want to upgrade quickly, and cannot easily determine which components you
use in your application, you can upgrade your zendframework requirement. When
you do, you should also install the zend-component-installer, to ensure that
component configuration is properly injected in your application.</p>
<pre class="codehilite"><code class="language-bash">$ composer require zendframework/zend-component-installer &quot;zendframework/zendframework:^3.0&quot;</code></pre>


<p>During installation, it will prompt you to add configuration for
components; choose either <code>application.config.php</code> or <code>modules.config.php</code>, and
re-use your selection for all other packages. This step ensures that the various
components installed, and any news ones you add later, are configured in your
application correctly.</p>
<p>This will upgrade you to the latest releases of all Zend Framework components at
once; it will also install new components developed as part of the version 3
initiative.</p>
<p>We still recommend reducing your dependencies at a later date, however.</p>
</blockquote>
<h2 id="integration-packages">Integration packages</h2>
<p>During the Zend Framework 3 initiative, one goal was to reduce the number of
dependencies for each package. This affected the MVC in particular, as a number
of features were optional or presented deep integrations between the MVC and
other components. These include the following:</p>
<h3 id="console-tooling">Console tooling</h3>
<p>If you were using the MVC console tooling, and are doing a partial update per
the recommendations, you will need to install
<a href="https://zendframework.github.io/zend-mvc-console/">zend-mvc-console</a>.</p>
<h3 id="forms-integration">Forms integration</h3>
<p>If you were using the forms in your MVC application, and are doing a partial
update per the recommendations, you will need to install
<a href="https://zendframework.github.io/zend-mvc-form/">zend-mvc-form</a>.</p>
<h3 id="i18n-integration">i18n integration</h3>
<p>If you were using i18n features in your MVC application, and are doing a partial
update per the recommendations, you will need to install
<a href="https://zendframework.github.io/zend-mvc-i18n/">zend-mvc-i18n</a>.</p>
<h3 id="plugins">Plugins</h3>
<p>If you were using any of the <code>prg()</code>, <code>fileprg()</code>, <code>identity()</code>, or
<code>flashMessenger()</code> MVC controller plugins, and are doing a partial update per
the recommendations, you will need to install
<a href="https://zendframework.github.io/zend-mvc-plugins/">zend-mvc-plugins</a>.</p>
<h3 id="zend-di-integration">zend-di integration</h3>
<p>If you were using the zend-servicemanager &lt;-&gt; zend-di integration within
your application, you will need to install
<a href="https://zendframework.github.io/zend-servicemanager-di/">zend-servicemanager-di</a>.</p>
<h2 id="autoloading">Autoloading</h2>
<p>If you are doing a partial upgrade per the above recommendations (vs. upgrading
the zendframework package), one change is that zend-loader is no longer
installed by default, nor recommended. Instead, we recommend using
<a href="https://getcomposer.org/doc/04-schema.md#autoload">Composer for autoloading</a>.</p>
<p>As such, you will need to setup autoloading rules for each module specific to
your application.</p>
<p>As an example, if you are still defining the default <code>Application</code> module, you
can add autoloading for it as follows in your project's <code>composer.json</code>:</p>
<pre class="codehilite"><code class="language-json">&quot;autoload&quot;: {
    &quot;psr-4&quot;: {
        &quot;Application\\&quot;: &quot;module/Application/src/Application/&quot;
    },
    &quot;files&quot;:  [
        &quot;module/Application/Module.php&quot;
    ]
}</code></pre>


<p>The above creates a <a href="http://www.php-fig.org/psr/psr-4/">PSR-4</a> autoloading rule
for the <code>Application</code> module, telling it to look in the
<code>module/Application/src/Application/</code> directory. Since the <code>Application\Module</code>
class is defined at the module root, we specify it in the <code>files</code> configuration.</p>
<p>To improve on this, and simplify autoloading, we recommend adopting a complete
PSR-4 directory structure for your module class files. As an example, to change
the existing <code>Application</code> module to PSR-4, you can do the following:</p>
<pre class="codehilite"><code class="language-bash">$ cd module/Application
$ mv src temp
$ mv temp/Application src
$ rm -Rf ./temp
$ mv Module.php src/</code></pre>


<p>Update your <code>Module.php</code> file to do the following:</p>
<ul>
<li>Remove the <code>getAutoloaderConfig()</code> method entirely, if defined.</li>
<li>Update the <code>getConfig()</code> method from <code>include __DIR__ .
  '/config/module.config.php</code> to <code>include _DIR__ .
  '/../config/module.config.php</code>.</li>
</ul>
<p>You can then update the <code>autoload</code> configuration to:</p>
<pre class="codehilite"><code class="language-json">&quot;autoload&quot;: {
    &quot;psr-4&quot;: {
        &quot;Application\\&quot;: &quot;module/Application/src/&quot;
    }
}</code></pre>


<p>The updated application skeleton already takes this approach.</p>
<h2 id="bootstrap">Bootstrap</h2>
<p>Because version 3 requires usage of Composer for autoloading, you can simplify
your application bootstrap.</p>
<p>First, if you were using an <code>init_autoloader.php</code> file, you can now remove it.</p>
<p>Second, update your <code>public/index.php</code> to read as follows:</p>
<pre class="codehilite"><code class="language-php">&lt;?php

use Zend\Mvc\Application;

/**
 * This makes our life easier when dealing with paths. Everything is relative
 * to the application root now.
 */
chdir(dirname(__DIR__));

// Decline static file requests back to the PHP built-in webserver
if (php_sapi_name() === 'cli-server') {
    $path = realpath(__DIR__ . parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH));
    if (__FILE__ !== $path &amp;&amp; is_file($path)) {
        return false;
    }
    unset($path);
}

// Composer autoloading
include __DIR__ . '/../vendor/autoload.php';

if (! class_exists(Application::class)) {
    throw new RuntimeException(
        &quot;Unable to load application.\n&quot;
        . &quot;- Type `composer install` if you are developing locally.\n&quot;
    );
}

// Run the application!
Application::init(require __DIR__ . '/../config/application.config.php')-&gt;run();</code></pre>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../components/"><i class="fa fa-arrow-left"></i> Previous</a>
    </li>
    <li class="next disabled ">
      <a rel="next" >Next <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
        
    </div>
    <!-- content:end -->

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Copyright (c) 2016 <a href="http://www.zend.com/">Zend Technologies USA Inc.</a><br></small>
        </p>
        <p><small><a href="http://framework.zend.com">Learn more about Zend Framework</a></small></p>
    </footer>

    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/prism-zf.js"></script>

    <script>var base_url = '../../..';</script>
    <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
    <script src="../../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="http://framework.zend.com/images/logos/zf-logo-mark.png" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

    <script>
  // Prepare the component list dropdown for display
  $(function () {
    var components = $(".zf-components"),
        componentList = components.find(".component-list"),
        sidebar = $(".bs-sidebar.affix"),
        sidebarInitialPos = sidebar.css("position"),
        hidden,
        componentToggle = $(".component-toggle"),
        navbar = $(".navbar-fixed-top"),
        rollUpLink = $(".zf-components-rollup a");

    // Initial setup on document load
    components.insertBefore(navbar);
    $(".zf-logo a").tooltip();
    componentToggle.tooltip();
    rollUpLink.attr({ href: "#", alt: "Hide component list" });

    // Cast initial sidebar position value
    if (undefined === sidebarInitialPos) {
      sidebarInitialPos = "fixed";
    }

    // Setup onclick events to toggle list
    componentToggle.click(toggleComponentList);
    rollUpLink.click(toggleComponentList);

    // Toggle the component list display
    function toggleComponentList(event) {
      event.preventDefault();

      if (hidden === undefined) {
        // Not loaded yet; load and display.
        loadComponentList();
        return;
      }

      if (hidden) {
        // Hidden; display.
        showComponentList();
        return;
      }

      // Currently visible; hide
      hideComponentList();
    }

    // Show the component list
    function showComponentList() {
      navbar.css({position: "relative"});
      sidebar.css({position: "relative"});
      components
        .css({"margin-top": "-" + components.outerHeight() + "px"})
        .show()
        .animate({"margin-top": 0}, {
          complete: function () {
            componentToggle
              .data("placement", "top")
              .attr("data-original-title", "Hide component list");
            hidden = false;
          },
          queue: false
        });
    }

    // Hide the component list
    function hideComponentList() {
      components.animate({"margin-top": "-" + components.outerHeight() + "px"}, {
        complete: function () {
          navbar.css({position: "fixed"});
          sidebar.css({position: sidebarInitialPos});
          componentToggle
            .data("placement", "bottom")
            .attr("data-original-title", "Show component list");
          components.hide();
          hidden = true;
        },
        queue: false
      });
      sidebar.animate({ top: sidebarInitialTop + "px" }, { queue: false});
    }

    // Inject a component into the componet list DOM.
    function injectComponent(index, component) {
      componentList.append('<div class="component"><h4><a href="' + component.url + '">' + component.name + '</a></h4><p>' + component.description + '</p></div>');
    }

    // Parse the component list, build the DOM, and display it.
    function parseComponentList(components) {
      $.each(components, injectComponent);
      showComponentList();
    }

    // Fetch the component list and display it.
    function loadComponentList () {
      $.ajax({
        url: "//zendframework.github.io/zf-mkdoc-theme/scripts/zf-component-list.json",
        dataType: "text json",
        success: parseComponentList,
        error: function (e) {
          console.log("Error occurred with XHR call", e);
        }
      });
    }
  });
</script>
    </body>

</html>
